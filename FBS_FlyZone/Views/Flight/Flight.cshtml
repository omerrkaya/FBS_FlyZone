@using EntityLayer.Concrete
@model List<Flight>

@{
	ViewData["Title"] = "Uçuş";
	Layout = "~/Views/Shared/UserLayout.cshtml";
}

<!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	Start Banner
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
<section class="banner-section">
	<div class="banner-element" data-aos="fade-left" data-aos-duration="1200">
		<img src="~/flynext/assets/images/element/element-21.png" alt="element">
	</div>
	<div class="banner-element-two">
		<img src="~/flynext/assets/images/element/element-3.png" alt="element">
	</div>
	<div class="banner-element-three">
		<img src="~/flynext/assets/images/element/element-4.png" alt="element">
	</div>
	<div class="banner-element-four">
		<img src="~/flynext/assets/images/element/element-5.png" alt="element">
	</div>
	<div class="banner-social-area">
		<ul class="banner-social">
			<li><a href="#0"><i class="fab fa-facebook-f"></i></a></li>
			<li><a href="#0" class="active"><i class="fab fa-twitter"></i></a></li>
			<li><a href="#0"><i class="fab fa-youtube"></i></a></li>
			<li><a href="#0"><i class="fab fa-instagram"></i></a></li>
		</ul>
	</div>
	<div class="container-fluid">
		<div class="row justify-content-center align-items-center mb-30-none">
			<div class="col-xxl-5 col-xl-6 col-lg-12 mb-30">
				<div class="banner-content" data-aos="fade-right" data-aos-duration="1800">
					<span class="sub-title"><span>Fly</span>Next</span>
					<h1 class="title">Uçuşunuzu Hemen Rezerve Edin</h1>
					<p>
						FlyZone Airlines, lüks ve kurumsal özel jet charter hizmetleri için standartları aşıyor ve yeni bir seviyeye taşıyor. Profesyonel bir hizmet sunmaktan gurur duyuyoruz.
					</p>
					<div class="banner-btn">
						<a href="@Url.Action("Flight", "Flight")" class="btn--base">
							<i class="fas fa-chevron-right mr-2"></i> Uçuşunuzu Planlayın
						</a>
						<a href="@Url.Action("ContactUs", "Help")" class="btn--base active">
							Teklif İsteyin <i class="icon-Group-2361 ml-2"></i>
						</a>
					</div>
				</div>
			</div>
			<div class="col-xxl-7 col-xl-6 col-lg-6 mb-30">
				<div class="banner-thumb">
					<img src="~/flynext/assets/images/element/element-2.png" alt="element">
				</div>
			</div>
		</div>
	</div>
</section>
<!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	End Banner
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
<!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	Start Scroll-To-Top
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
<a href="#" class="scrollToTop">
	<i class="las la-dot-circle"></i>
	<span>Üst</span>
</a>
<!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	End Scroll-To-Top
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->


<section class="banner-sectionn">
	<div class="overlay"></div>
	<div class="container">
		<div class="search-box">
			@using (Html.BeginForm("SearchedFlight", "Flight", FormMethod.Post, new { @class = "book-form" }))
			{
				@Html.AntiForgeryToken()
				<div class="row justify-content-center mb-20-none" style="margin-bottom:5px;padding-top:20px">
					<div class="col-xl-3 col-lg-3 col-md-6 col-sm-6 form-group">
						<div class="book-select">
							<label>Nereden</label>
							<div class="book-form-icon">
								<i class="icon-from-airplane"></i>
							</div>
							<select name="DepartureAirportId" class="book-select form--control custom-select">
								@foreach (var item in Model.Select(m => m.DepartureAirport).GroupBy(a => a.AirportID).Select(g => g.First()))
								{
									<option value="@item.AirportID">@item.Airport_Name</option>
								}
							</select>
						</div>
					</div>
					<div class="col-xl-3 col-lg-3 col-md-6 col-sm-6 form-group">
						<div class="book-select">
							<label>Nereye</label>
							<div class="book-form-icon">
								<i class="icon-to-airplane"></i>
							</div>
							<select name="ArrivalAirportId" class="book-select form--control custom-select">
								@foreach (var item in Model.Select(m => m.ArrivalAirport).GroupBy(a => a.AirportID).Select(g => g.First()))
								{
									<option value="@item.AirportID">@item.Airport_Name</option>
								}
							</select>
						</div>
					</div>
					<div class="col-xl-3 col-lg-3 col-md-6 col-sm-6 form-group">
						<label>Gidiş Tarihi</label>
						<input type="date" class="book-select form--control" name="DepartureDate" >
					</div>
				</div>





				<div class="row justify-content-center mb-20-none">
					<!-- Yetişkin ve Çocuk Sayısı kısımları yanyana -->
					<div class="col-xl-3 col-lg-3 col-md-6 col-sm-6 form-group">
						<label>Yetişkin Sayısı</label>
						<div class="book-quantity">
							<div class="book-plus-minus">
								<div class="dec qtybutton">-</div>
								<input class="book-plus-minus-box qty" type="text" name="AdultCount" value="1" readonly>
								<div class="inc qtybutton">+</div>
							</div>
						</div>
					</div>
					<div class="col-xl-3 col-lg-3 col-md-6 col-sm-6 form-group">
						<label>Çocuk Sayısı</label>
						<div class="book-quantity">
							<div class="book-plus-minus">
								<div class="dec qtybutton">-</div>
								<input class="book-plus-minus-box qty" type="text" name="ChildCount" value="0" readonly>
								<div class="inc qtybutton">+</div>
							</div>
						</div>
					</div>
				</div>
				<div class="row justify-content-center  align-items-center" id="mainFlightForm">

					<div class="col-xl-12 form-group text-center">
						<button type="submit" class="btn--base ml-auto mr-auto mt-30">
							<i class="icon-btn-icon"></i> Uçuş Ara
						</button>
					</div>
				</div>
			}
			<div class="bilgilendirme-kutusu">
				<h4>Değerli Yolcularımız,</h4>
				<p>
					İstanbul'da yaşanan hava muhalefeti nedeniyle, 19-20-21-22-23 Mayıs 2025 tarihli,
					İstanbul Havalimanı (IST) kalkış ve varışlı bazı uçuşlarımız iptal edilmiştir.
					Uçuşlarınızla ilgili güncel bilgiye <a href="@Url.Action("FlightStatus", "BuyAndManageTicket")" style="color:#dbba86;">
						<strong>

							uçuş durumu

						</strong>
					</a> sayfamız üzerinden,
					uçuş numaranızı, kalkış ve varış yeri bilgisini girerek ulaşabilir, iade veya değişiklik
					haklarınızı yine aynı sayfadan öğrenebilirsiniz.
				</p>
				<p>Anlayışınız için teşekkür ederiz.</p>
				<p class="son-guncelleme">Son güncelleme: 07.05.2025 11:30 (GMT +3)</p>
			</div>
		</div>

	</div>

</section>




<style>

	input[type="date"]::-webkit-calendar-picker-indicator {
		filter: invert(34%) sepia(92%) saturate(2365%) hue-rotate(185deg);
		cursor: pointer;
	}


	.bilgilendirme-kutusu {
		border: 1px solid #ccc;
		color: white;
		background-color: #19232d;
		padding: 20px;
		margin: 20px auto;
		margin-bottom: 40px;
		max-width: 1200px;
		font-family: Arial, sans-serif;
		border-left: 5px solid #dbba86;
	}

		.bilgilendirme-kutusu h4 {
			color: #dbba86;
			margin-top: 0;
		}

		.bilgilendirme-kutusu p {
			margin: 10px 0;
			line-height: 1.6;
		}

	.son-guncelleme {
		font-size: 0.9em;
		color: #555;
		margin-top: 10px;
	}

	.custom-select {
		appearance: none; /* Varsayılan oku gizle */
		background: url('data:image/svg+xml;base64,...') no-repeat right 10px center; /* Simgeyi özelleştir */
		padding-right: 30px; /* Simge için boşluk bırak */
		min-width: 200px;
		max-width: 315px;
		box-sizing: border-box;
	}

	.passenger-details-overlay {
		position: absolute;
		top: 100%;
		left: 0;
		background-color: rgba(30, 30, 30, 0.95);
		padding: 1rem;
		border-radius: 10px;
		box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
		z-index: 9999;
		border: 2px solid #dbba86;
		width: 100%;
		display: none;
		max-height: 400px;
		overflow-y: auto;
		transition: opacity 0.3s ease;
	}



	.book-form-section {
		position: relative;
	}

	.passenger-selector-group {
		position: relative;
		z-index: 1000;
	}

	.book-form-section.expanded .passenger-details-overlay {
		display: block;
	}

	.passenger-details-overlay label {
		display: block;
		margin-bottom: 8px;
		font-weight: 500;
		color: #fff;
	}

	.class-selection {
		display: flex;
		gap: 25px;
		margin-bottom: 15px;
	}

		.class-selection label {
			display: flex;
			align-items: center;
			gap: 8px;
			font-size: 16px;
		}

	.qty-buttons {
		display: flex;
		align-items: center;
		gap: 10px;
		margin-bottom: 10px;
	}

		.qty-buttons input {
			width: 60px;
			text-align: center;
			background: transparent;
			color: #fff;
			border: 1px solid rgba(255, 255, 255, 0.3);
			border-radius: 5px;
			font-size: 16px;
		}

		.qty-buttons button {
			width: 30px;
			height: 30px;
			background: #dbba86;
			color: #fff;
			border: none;
			border-radius: 5px;
			font-size: 18px;
			cursor: pointer;
		}

	.passenger-type {
		display: flex;
		justify-content: space-between;
		align-items: center;
		margin-bottom: 10px;
	}

		.passenger-type label {
			font-size: 16px;
		}

	.flight-type-selector {
		display: flex;
		justify-content: center;
		gap: 40px;
		margin: 20px 0 40px;
		flex-wrap: nowrap;
	}

		.flight-type-selector label {
			color: #fff;
			font-size: 18px;
			display: flex;
			align-items: center;
			gap: 10px;
			white-space: nowrap;
		}

		.flight-type-selector input[type="radio"] {
			accent-color: red;
			transform: scale(1.3);
			margin: 0;
		}

	.book-form-area {
		overflow: visible;
		position: relative;
		z-index: 1;
	}

	#mainFlightForm {
		display: flex;
		flex-wrap: nowrap;
		justify-content: space-between;
		align-items: flex-end;
		gap: 12px;
	}

		#mainFlightForm .form-group {
			min-width: 200px;
			max-width: 400px;
			flex: 0 0 auto;
		}

	.cccda {
		min-height: 450px;
		min-width: 1430px;
		border-radius: 50px;
	}

	/* Genel Ayarlar */
	.container {
		max-width: 1000px;
		margin: auto;
	}

	.banner-sectionn {
		background-image: url('@Url.Content("~/flynext/assets/images/ucuss.jpg")');
		background-size: cover;
		background-position: bottom;
		position: relative;
		padding: 100px 0;
	}

	.overlay {
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		background: rgba(0, 0, 0, 0.6);
	}

	.search-box {
		position: relative;
		z-index: 2;
		background: rgba(255, 255, 255, 0.9);
		padding: 20px;
		border-radius: 12px;
		text-align: center;
		background-color: black;
		background: rgba(0,0,0,0.5);
	}

	.title {
		color: #d0021b;
		font-weight: bold;
		margin-bottom: 20px;
	}

	.form-container {
		display: flex;
		flex-wrap: wrap;
		gap: 10px;
		justify-content: center;
	}

	.form-control {
		flex: 1 1 180px;
		padding: 8px;
		border-radius: 8px;
		border: 1px solid #ccc;
	}

	.btn-small {
		padding: 8px 12px;
		font-size: 14px;
	}

	.feature-item {
		background: #fff;
		border-radius: 12px;
		border: 1px solid #ddd;
		box-shadow: 0 3px 8px rgba(0, 0, 0, 0.06);
		padding: 20px;
		margin: 20px;
		text-align: center;
		transition: all 0.3s ease;
		height: 100%;
		display: flex;
		flex-direction: column;
		justify-content: space-between;
		min-height: 350px;
	}

		.feature-item:hover {
			box-shadow: 0 8px 22px rgba(0, 0, 0, 0.1);
		}

	.feature-icon img {
		width: 100%;
		height: 160px;
		object-fit: cover;
		border-radius: 10px;
		margin-bottom: 50px;
	}

	.feature-content .title {
		font-size: 20px;
		font-weight: 600;
		color: #222;
		margin-bottom: 10px;
		padding-top: 30px;
	}

	.feature-content p {
		font-size: 15px;
		color: #555;
		flex-grow: 1;
	}

	.feature-item .price {
		font-size: 16px;
		font-weight: bold;
		color: #d0021b;
	}

	.feature-btn a {
		display: inline-block;
		margin-top: 20px;
		background-color: #e60023;
		color: white;
		padding: 10px 22px;
		border-radius: 6px;
		font-size: 15px;
		text-decoration: none;
		transition: background-color 0.3s;
	}

		.feature-btn a:hover {
			background-color: #c4001a;
		}

</style>


<script>
		window.addEventListener("DOMContentLoaded", function () {

		const today = new Date().toISOString().split('T')[0];


		document.querySelector('input[type="date"]').value = today;


		const returnDateInput = document.querySelector('#returnDateGroup input[type="date"]');
		if (returnDateInput) {
			returnDateInput.value = today;
		}
	});

	let passengerCounts = {
		adult: 1,
		child: 0,
		infant: 0,
		student: 0
	};

	function changePassengerCount(type, delta) {
		if (passengerCounts[type] + delta < 0) return;
		passengerCounts[type] += delta;
		document.getElementById(type + "Count").value = passengerCounts[type];
		updatePassengerSummary();
	}

	function updatePassengerSummary() {
		const total = Object.values(passengerCounts).reduce((a, b) => a + b, 0);
		const cls = document.querySelector('input[name="flightClass"]:checked')?.value || "Ekonomi";
		document.getElementById("passengerSummary").value = `${total} Yolcu, ${cls}`;
	}


	document.querySelectorAll('input[name="flightClass"]').forEach((radio) => {
		radio.addEventListener('change', function () {
			updatePassengerSummary();
		});
	});


	document.getElementById("passengerToggle").addEventListener("click", function (e) {
		e.stopPropagation();
		const details = document.getElementById("passengerDetails");
		const section = document.querySelector(".book-form-section");
		const container = document.querySelector(".container");


		if (details.style.display === "none" || details.style.display === "") {
			details.style.display = "block";
			container.style.minHeight = '800px';
		} else {
			details.style.display = "none";
			section.classList.remove("expanded");
			container.style.minHeight = 'auto';
		}
	});


	window.addEventListener("click", function (e) {
		const details = document.getElementById("passengerDetails");
		const toggle = document.getElementById("passengerToggle");

		if (!details.contains(e.target) && !toggle.contains(e.target)) {
			details.style.display = "none";
			const container = document.querySelector(".container");
			container.style.minHeight = 'auto';
		}
	});


	window.addEventListener("DOMContentLoaded", function () {
		const section = document.querySelector(".book-form-section");
		section.classList.add("expanded");


		updatePassengerSummary();
	});


	document.querySelectorAll('input[name="flightType"]').forEach((radio) => {
		radio.addEventListener('change', function () {
			handleFlightTypeChange(this.value);
		});
	});

	function handleFlightTypeChange(value) {
		const returnGroup = document.getElementById("returnDateGroup");
		const passengerGroup = document.querySelector(".book-quantity");
		const mainFlightForm = document.getElementById("mainFlightForm");

		if (value === "round") {
			returnGroup.style.display = "block";
			passengerGroup.style.display = "flex";
			mainFlightForm.style.display = "flex";
		} else if (value === "oneway") {
			returnGroup.style.display = "none";
			passengerGroup.style.display = "flex";
			mainFlightForm.style.display = "flex";
		}
		if (tripType === "oneway") {
	  document.getElementById("returnDateGroup").style.display = "none";
	} else {
	  document.getElementById("returnDateGroup").style.display = "block";
	}

	}



	window.addEventListener("DOMContentLoaded", function () {
		const selected = document.querySelector('input[name="flightType"]:checked');
		if (selected) {
			handleFlightTypeChange(selected.value);
		}
	});
</script>