@model List<EntityLayer.Concrete.Payment>
@{
    ViewData["Title"] = "Ödeme Başarılı";
    Layout = "~/Views/Shared/UserLayout.cshtml";
}

<div class="reservation-container" style="margin-top:130px;">
    <div class="reservation-header">
        <h2><i class="fas fa-check-circle"></i> Ödeme Başarılı</h2>
    </div>

    <div class="reservation-steps">
        <div class="step">
            <div class="step-number">1</div>
            <div class="step-title">Yolcu Bilgileri</div>
        </div>
        <div class="step">
            <div class="step-number">2</div>
            <div class="step-title">Koltuk Seçimi</div>
        </div>
        <div class="step">
            <div class="step-number">3</div>
            <div class="step-title">Ödeme</div>
        </div>
        <div class="step active">
            <div class="step-number">4</div>
            <div class="step-title">Onay</div>
        </div>
    </div>

    <div class="reservation-form" style="border-radius:0px">
        <div class="form-section">
            <div class="text-center mb-4">
                <i class="fas fa-check-circle" style="font-size: 4rem; color: var(--gold-accent);"></i>
                <h3 class="mt-3" style="color: var(--gold-accent);">Ödemeniz Başarıyla Alındı</h3>
                <p class="text-light">Bilet detaylarınız e-posta adresinize gönderildi.</p>
            </div>

            @if (Model != null && Model.Any())
            {
                <div class="section-title">
                    <i class="fas fa-receipt"></i> Rezervasyon Detayları
                </div>

                @foreach (var payment in Model)
                {
                    <div class="card mb-3" style="background: rgba(255,255,255,0.1); border: 1px solid var(--gold-accent);">
                        <div class="card-body text-light">
                            <div class="d-flex justify-content-between mb-2">
                                <span>Yolcu:</span>
                                <span>@payment.Reservation.Passenger.Passenger_Name_Surname</span>
                            </div>
                            <div class="d-flex justify-content-between mb-2">
                                <span>Uçuş:</span>
                                <span>@payment.Reservation.Flight.DepartureAirport.AP_City - @payment.Reservation.Flight.ArrivalAirport.AP_City</span>
                            </div>
                            <div class="d-flex justify-content-between mb-2">
                                <span>Tarih:</span>
                                <span>@payment.Reservation.Flight.Flight_DateTime.ToString("dd.MM.yyyy HH:mm")</span>
                            </div>
                            <div class="d-flex justify-content-between mb-2">
                                <span>Koltuk:</span>
                                <span>@payment.Reservation.Seat_Number</span>
                            </div>
                            <div class="d-flex justify-content-between mb-2">
                                <span>Tutar:</span>
                                <span>@payment.Payment_Amount.ToString("N2") TRY</span>
                            </div>
                        </div>
                    </div>
                }

                <div class="d-flex justify-content-between mt-4">
                    <strong style="color: var(--gold-accent); font-size: 1.2em;">Toplam Tutar:</strong>
                    <strong style="color: var(--gold-accent); font-size: 1.2em;">@Model.Sum(p => p.Payment_Amount).ToString("N2") TRY</strong>
                </div>

                <div class="d-flex justify-content-between mt-2">
                    <span class="text-light">Ödeme Tarihi:</span>
                    <span class="text-light">@Model.First().Payment_Date.ToString("dd.MM.yyyy HH:mm")</span>
                </div>

                <div class="d-flex justify-content-between mt-2">
                    <span class="text-light">Ödeme Yöntemi:</span>
                    <span class="text-light">@Model.First().Payment_Method</span>
                </div>
            }

            <div class="mt-5 text-center">
                <a href="@Url.Action("Index", "Home")" class="btn btn-primary btn-submit" style="max-width: 300px;">
                    <i class="fas fa-home me-2"></i> Ana Sayfaya Dön
                </a>
            </div>
        </div>
    </div>
</div>
